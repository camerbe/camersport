<div class="bg-white p-4 rounded shadow mt-6 h-screen w-full flex flex-col">
  <div class="flex flex-col gap-3 flex-1 overflow-auto w-full">
    <!-- Team A Section -->
    <p-fieldset
      legend="Équipe A"
      [toggleable]="true"
      [collapsed]="false"
      class="w-full"
      [styleClass]="'p-fieldset-sm'"

      >
      <div class="w-full">
        <div [formGroup]="matchForm">

          <div formGroupName="teamA">
            <input pInputText formControlName="coach" placeholder="Entraîneur" />

            <h3 class="md:text-2xl text-indigo-600 font-bold py-3 capitalize">Joueurs titulaires</h3>
            <div formArrayName="startingXI">
              <div *ngFor="let player of teamAControls; let i = index" [formGroupName]="i" class="flex p-grid p-ai-center gap-2">
                <p-avatar
                  [label]="(i+1).toString()"
                  styleClass="p-col mt-2"
                   />
                <div class="p-col mt-2">
                  <input pInputText [formControl]="getControl(player, 'number')" placeholder="Numéro" class="w-32"/>
                </div>
                <div class="p-col  mt-2">
                  <input pInputText [formControl]="getControl(player, 'name')" placeholder="Nom" class="w-full"/>
                </div>
                <div class="p-col mt-2">
                  <p-dropdown
                    class="w-full"
                    [options]="positions"
                    [formControl]="getControl(player, 'position')"
                    placeholder="Poste"
                    optionLabel="label"
                    optionValue="value">

                  </p-dropdown>
                </div>
              </div>
            </div>

            <h3 class="md:text-2xl text-indigo-600 font-bold py-3 capitalize">Remplaçants</h3>
            <div formArrayName="substitutes">
              <div *ngFor="let sub of teamASubstitutes; let i = index" [formGroupName]="i" class="flex p-grid p-ai-center gap-2">
                <p-avatar
                  [label]="(i+1).toString()"
                  styleClass="p-col mt-2"
                   />
                <div class="p-col mt-2">
                  <input pInputText [formControl]="getControl(sub, 'number')" placeholder="Numéro" class="w-full"/>
                </div>
                <div class="p-col mt-2">
                  <input pInputText [formControl]="getControl(sub, 'name')" placeholder="Nom" class="w-full"/>
                </div>
                <div class="p-col mt-2">
                  <p-dropdown
                    class="w-full"
                    [options]="positions"
                    [formControl]="getControl(sub, 'position')"
                    placeholder="Poste"
                    optionLabel="label"
                    optionValue="value">
                  </p-dropdown>
                </div>
              </div>
              <div class="flex">
                <button pButton type="button"  (click)="addSubstitute('teamA')" class="mt-3 mb-3 mr-3 " icon="pi pi-plus" [rounded]="true"></button>
              <button pButton type="button"  icon="pi pi-times" [rounded]="true" severity="danger" (click)="removeSubstitute('teamA',teamASubstitutes.length-1)" class="mt-3 mb-3"></button>
              </div>


            </div>
          </div>
        </div>
      </div>
    </p-fieldset>

    <!-- Divider -->
     <p-divider />
    <!-- Team B Section -->
    <p-fieldset
    legend="Équipe B"
    [toggleable]="true"
    [collapsed]="false"
    class="w-full"
    [styleClass]="'p-fieldset-sm'"

    >
    <div class="w-full">
      <div [formGroup]="matchForm">
        <h2>Équipe B</h2>
        <div formGroupName="teamB">
          <input pInputText formControlName="coach" placeholder="Entraîneur" />

          <h3 class="md:text-2xl text-indigo-600 font-bold py-3 capitalize">Joueurs titulaires</h3>
          <div formArrayName="startingXI">
            <div *ngFor="let player of teamBControls; let i = index" [formGroupName]="i" class="flex p-grid p-ai-center gap-2">
              <p-avatar
                [label]="(i+1).toString()"
                styleClass="p-col mt-2"
                 />
              <div class="p-col mt-2">
                <input pInputText [formControl]="getControl(player, 'number')" placeholder="Numéro" class="w-24"/>
              </div>
              <div class="p-col mt-2">
                <input pInputText [formControl]="getControl(player, 'name')" placeholder="Nom"/>
              </div>
              <div class="p-col mt-2">
                <p-dropdown
                  [options]="positions"
                  [formControl]="getControl(player, 'position')"
                  placeholder="Poste"
                  optionLabel="label"
                  optionValue="value">
                </p-dropdown>
              </div>
            </div>
          </div>

          <h3 class="md:text-2xl text-indigo-600 font-bold py-3 capitalize">Remplaçants</h3>
          <div formArrayName="substitutes">
            <div *ngFor="let sub of teamBSubstitutes; let i = index" [formGroupName]="i" class="flex p-grid p-ai-center gap-2">
              <p-avatar
                [label]="(i+1).toString()"
                styleClass="p-col mt-2"
                 />
              <div class="p-col mt-2">
                <input pInputText [formControl]="getControl(sub, 'number')" placeholder="Numéro" class="w-24"/>
              </div>
              <div class="p-col mt-2">
                <input pInputText [formControl]="getControl(sub, 'name')" placeholder="Nom"/>
              </div>
              <div class="p-col mt-2">

                  <p-dropdown
                    [options]="positions"
                    [formControl]="getControl(sub, 'position')"
                    placeholder="Poste"
                    optionLabel="label"
                    optionValue="value">
                  </p-dropdown>

              </div>
            </div>
            <button pButton type="button" label="Ajouter Remplaçant" (click)="addSubstitute('teamB')"></button>
          </div>
        </div>
      </div>
    </div>
    </p-fieldset>

  </div>

  <!-- Submit Button at Bottom -->
  <div class="mt-auto p-4">
    <button pButton type="submit" label="Enregistrer" (click)="submit()" class="w-full"></button>
  </div>
</div>
